import{u as l,a as u,$ as d}from"./jsxRuntime.module.c7z9DfWG.js";import{d as m,y as f}from"./hooks.module.BXRoyx2g.js";import{a as c}from"./index.95d291e9.n1qhZAKC.js";import"./preact.module.BYSHj7yn.js";const h=e=>e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`),g=(e,t)=>{const r=new URL(e);for(const n in t){const i=h(n),s=t[n];s===void 0?r.searchParams.delete(i):Array.isArray(s)?r.searchParams.set(i,s.join(",")):r.searchParams.set(i,`${s}`)}const a=r.searchParams.get("s");return a&&(r.searchParams.delete("s"),r.searchParams.append("s",a)),r.toString()},w=e=>e!=null,y=e=>w(e)&&!!e.url,p=(e,t={})=>e&&y(e)?g(e.url,t):null;function P(e,t,r){let a=new Set(t).add(void 0);return e.listen((n,i,s)=>{a.has(s)&&r(n,i,s)})}function k(e,t={}){let[,r]=m({}),[a]=m(e.get());return f(()=>{a!==e.get()&&r({})},[]),f(()=>{let n,i,s,o=()=>{n||(n=1,i=setTimeout(()=>{n=void 0,r({})}))};return t.keys?s=P(e,t.keys,o):s=e.listen(o),()=>{s(),clearTimeout(i)}},[e,""+t.keys]),e.get()}function T({initialProject:e}){const t=k(d),{name:r,artwork:a,link:n}=t||e||{};return l("section",{className:c.viewer,children:[l("h2",{children:u(r)}),l("figure",{children:l("img",{src:p(a),alt:`Cover artwork for: ${u(r)}`})}),n?.url&&l("a",{class:c.link,href:n.url,target:n.target,children:["Listen on Bandcamp",l("span",{class:c.icon,children:l("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:l("use",{href:"#icon-external-link"})})})]})]})}export{T as Viewer};
