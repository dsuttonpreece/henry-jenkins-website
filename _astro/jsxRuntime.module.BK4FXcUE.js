import{d,y as v}from"./hooks.module.BXRoyx2g.js";import{l as p}from"./preact.module.BYSHj7yn.js";let o=[],s=0;const _=4;let y=i=>{let l=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(n){return e.lc=l.push(n),()=>{for(let u=s+_;u<o.length;)o[u]===n?o.splice(u,_):u+=_;let t=l.indexOf(n);~t&&(l.splice(t,1),--e.lc||e.off())}},notify(n,t){let u=!o.length;for(let r of l)o.push(r,e.value,n,t);if(u){for(s=0;s<o.length;s+=_)o[s](o[s+1],o[s+2],o[s+3]);o.length=0}},off(){},set(n){let t=e.value;t!==n&&(e.value=n,e.notify(t))},subscribe(n){let t=e.listen(n);return n(e.value),t},value:i};return e};function m(i,l,e){let n=new Set(l).add(void 0);return i.listen((t,u,r)=>{n.has(r)&&e(t,u,r)})}function k(i,l={}){let[,e]=d({}),[n]=d(i.get());return v(()=>{n!==i.get()&&e({})},[]),v(()=>{let t,u,r,f=()=>{t||(t=1,u=setTimeout(()=>{t=void 0,e({})}))};return l.keys?r=m(i,l.keys,f):r=i.listen(f),()=>{r(),clearTimeout(u)}},[i,""+l.keys]),i.get()}const b=y(0);var g=0;function x(i,l,e,n,t,u){l||(l={});var r,f,c=l;if("ref"in c)for(f in c={},l)f=="ref"?r=l[f]:c[f]=l[f];var a={type:i,props:c,key:e,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--g,__i:-1,__u:0,__source:t,__self:u};if(typeof i=="function"&&(r=i.defaultProps))for(f in r)c[f]===void 0&&(c[f]=r[f]);return p.vnode&&p.vnode(a),a}export{b as $,x as a,k as u};
